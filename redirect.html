<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <script>
        // Fetch the latest Unique ID from OneDrive
        fetch("https://lunet-my.sharepoint.com/:u:/g/personal/bscw8_lunet_lboro_ac_uk/Documents/Business%20Projects/unique_ids.json.txt?download=1")
          .then(response => response.text())  // Convert response to text
          .then(text => {
              let data = JSON.parse(text); // Parse text to JSON
              if (data.length > 0) {
                  let latestId = data[0]; // Get the latest Unique ID
                  console.log("Latest Unique ID:", latestId);

                  // Store in sessionStorage
                  sessionStorage.setItem("uniqueID", latestId);

                  // Redirect to index.html
                  window.location.replace("https://teemi-socialfinanceeeeee.github.io/unique-id-display/");
              } else {
                  document.body.innerHTML = "<p style='color: red;'>未找到 ID，请稍后再试。</p>";
                  console.error("Error: No Unique ID found in OneDrive file.");
              }
          })
          .catch(error => {
              document.body.innerHTML = "<p style='color: red;'>加载 ID 失败，请刷新页面。</p>";
              console.error("Error fetching Unique ID:", error);
          });
    </script>
</head>
<body>
    <p>正在跳转到您的专属 ID 页面...</p>
</body>
</html>
